(function(e){function t(t){for(var n,i,r=t[0],s=t[1],l=t[2],u=0,b=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&b.push(c[i][0]),c[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==c[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},c={app:0},a=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/health-slot/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=s;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1ebf":function(e,t,o){"use strict";o("c58e")},2847:function(e,t,o){"use strict";o("c497")},4935:function(e,t,o){"use strict";o("7941")},5163:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),c=(o("14d9"),o("cf05")),a=o.n(c),i=o("5502"),r=o("6605");const s={id:"app"},l={class:"header-content"},d={class:"header-right"};var u={__name:"App",setup(e){const t=Object(i["b"])(),o=Object(r["d"])(),c=Object(n["d"])(()=>t.getters.user),u=()=>{t.dispatch("logout"),o.push("/")};return(e,t)=>{const o=Object(n["B"])("router-view");return Object(n["w"])(),Object(n["h"])("div",s,[Object(n["i"])("header",null,[Object(n["i"])("div",l,[t[1]||(t[1]=Object(n["i"])("div",{class:"header-left"},null,-1)),t[2]||(t[2]=Object(n["i"])("div",{class:"header-center"},[Object(n["i"])("img",{src:a.a,alt:"Health Slot Logo",class:"logo"})],-1)),Object(n["i"])("div",d,[c.value.name?(Object(n["w"])(),Object(n["h"])("button",{key:0,onClick:u,class:"logout-btn"},t[0]||(t[0]=[Object(n["i"])("i",{class:"fas fa-sign-out-alt"},null,-1),Object(n["i"])("span",null,"Logout",-1)]))):Object(n["g"])("",!0)])])]),Object(n["i"])("main",null,[Object(n["k"])(o)])])}}},b=(o("ec67"),o("6b0d")),v=o.n(b);const O=v()(u,[["__scopeId","data-v-3c7a75be"]]);var j=O;o("e9f5"),o("a732");const p={class:"container"},f={class:"form-group"},m={class:"form-group"},g=["disabled"];var h={__name:"Welcome",setup(e){const t=Object(r["d"])(),o=Object(i["b"])(),c=Object(n["z"])(""),a=Object(n["z"])(""),s=Object(n["z"])(!1);async function l(){if(!s.value)try{s.value=!0;const e=`${a.value.toLowerCase()}-${c.value.toLowerCase().replace(/\s+/g,"-")}`;await o.dispatch("saveUser",{id:e,name:c.value,email:a.value}),t.push("/doctors")}catch(e){console.error("Error submitting form:",e)}finally{s.value=!1}}return(e,t)=>(Object(n["w"])(),Object(n["h"])("div",p,[t[4]||(t[4]=Object(n["i"])("h1",null,"Welcome to Health Slot",-1)),t[5]||(t[5]=Object(n["i"])("p",null,"We're here to help you book your appointment. Let's get started!",-1)),Object(n["i"])("form",{onSubmit:Object(n["M"])(l,["prevent"]),class:"welcome-form"},[Object(n["i"])("div",f,[t[2]||(t[2]=Object(n["i"])("label",{for:"name"},"Your Name",-1)),Object(n["L"])(Object(n["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),id:"name",type:"text",placeholder:"John Doe",required:""},null,512),[[n["H"],c.value]])]),Object(n["i"])("div",m,[t[3]||(t[3]=Object(n["i"])("label",{for:"email"},"Your Email",-1)),Object(n["L"])(Object(n["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),id:"email",type:"email",placeholder:"johndoe@gmail.com",required:""},null,512),[[n["H"],a.value]])]),Object(n["i"])("button",{type:"submit",class:"continue-btn",disabled:s.value},Object(n["E"])(s.value?"Please wait...":"Continue"),9,g)],32)]))}};o("2847");const y=v()(h,[["__scopeId","data-v-094a96b4"]]);var w=y;const k={class:"doctor-info"};var D={__name:"DoctorCard",props:{doctor:{type:Object,required:!0}},setup(e){return(t,o)=>{const c=Object(n["B"])("router-link");return Object(n["w"])(),Object(n["f"])(c,{to:"/doctor/"+e.doctor.id,class:"doctor-card"},{default:Object(n["K"])(()=>[o[3]||(o[3]=Object(n["i"])("div",{class:"doctor-avatar"},[Object(n["i"])("i",{class:"fas fa-user-md"})],-1)),Object(n["i"])("div",k,[Object(n["i"])("h2",null,[o[0]||(o[0]=Object(n["i"])("i",{class:"fas fa-stethoscope"},null,-1)),Object(n["j"])(" "+Object(n["E"])(e.doctor.name),1)]),Object(n["i"])("p",null,[o[1]||(o[1]=Object(n["i"])("i",{class:"fas fa-user-tag"},null,-1)),Object(n["j"])(" "+Object(n["E"])(e.doctor.speciality),1)]),o[2]||(o[2]=Object(n["i"])("button",{class:"view-schedule"},[Object(n["i"])("i",{class:"fas fa-calendar-alt"}),Object(n["j"])(" View Schedule ")],-1))])]),_:1},8,["to"])}}};o("83f8");const S=v()(D,[["__scopeId","data-v-292bd2aa"]]);var I=S;const _={class:"container"},C={class:"header"},E={class:"doctor-grid"};var A={__name:"Home",setup(e){const t=Object(i["b"])(),o=Object(n["z"])([]),c=t.getters.user;return Object(n["u"])(async()=>{await t.dispatch("loadDoctors"),o.value=t.state.doctors}),(e,t)=>(Object(n["w"])(),Object(n["h"])("div",_,[Object(n["i"])("div",C,[Object(n["i"])("h2",null,"Welcome, "+Object(n["E"])(Object(n["F"])(c).name||"Guest")+"!",1),t[0]||(t[0]=Object(n["i"])("p",null,[Object(n["i"])("i",{class:"fas fa-info-circle"}),Object(n["j"])(" Choose a doctor to see their available times. ")],-1))]),Object(n["i"])("div",E,[(Object(n["w"])(!0),Object(n["h"])(n["a"],null,Object(n["A"])(o.value,e=>(Object(n["w"])(),Object(n["f"])(I,{key:e.id,doctor:e},null,8,["doctor"]))),128))])]))}};o("cb53");const z=v()(A,[["__scopeId","data-v-a4ff1146"]]);var B=z;o("910d"),o("f665");const M={class:"doctor-header"},P={class:"left-section"},x={class:"doctor-info"},$={class:"avatar"},q={class:"details"},L={class:"subtitle"},T={class:"center-section"},V={class:"date-range"},U={class:"right-section"},W={class:"view-controls"},G={class:"view-toggle"};var N={__name:"DoctorHeader",props:{doctor:{type:Object,required:!0},currentView:{type:String,required:!0},startDate:{type:Date,required:!0},endDate:{type:Date,required:!0}},emits:["prev","next","view-change","book","back"],setup(e){const t=e,o=Object(n["d"])(()=>{if(!t.startDate||!t.endDate)return"";const e={month:"short",day:"numeric"},o={year:"numeric"},n=new Date(t.endDate);n.setDate(n.getDate()-1);const c=t.startDate.toLocaleDateString("en-US",e),a=n.toLocaleDateString("en-US",e),i=n.toLocaleDateString("en-US",o);return"timeGridWeek"===t.currentView?`${c} - ${a}, ${i}`:t.startDate.toLocaleDateString("en-US",{...e,year:"numeric"})});return(t,c)=>{var a,i,r,s;return Object(n["w"])(),Object(n["h"])("header",M,[Object(n["i"])("div",P,[Object(n["i"])("button",{class:"back-btn",onClick:c[0]||(c[0]=e=>t.$emit("back"))},c[5]||(c[5]=[Object(n["i"])("i",{class:"fas fa-arrow-left"},null,-1)])),Object(n["i"])("div",x,[Object(n["i"])("div",$,Object(n["E"])((null===(a=e.doctor)||void 0===a||null===(a=a.name)||void 0===a?void 0:a[0])||"D"),1),Object(n["i"])("div",q,[Object(n["i"])("h1",null,Object(n["E"])(null===(i=e.doctor)||void 0===i?void 0:i.name),1),Object(n["i"])("p",L,Object(n["E"])(null===(r=e.doctor)||void 0===r?void 0:r.speciality)+" | "+Object(n["E"])(null===(s=e.doctor)||void 0===s?void 0:s.timezone),1)])])]),Object(n["i"])("div",T,[Object(n["i"])("span",V,Object(n["E"])(o.value),1)]),Object(n["i"])("div",U,[Object(n["i"])("div",W,[Object(n["i"])("button",{class:"nav-btn",onClick:c[1]||(c[1]=e=>t.$emit("prev"))},c[6]||(c[6]=[Object(n["i"])("i",{class:"fas fa-chevron-left"},null,-1)])),Object(n["i"])("div",G,[Object(n["i"])("button",{class:Object(n["r"])(["toggle-btn",{active:"timeGridWeek"===e.currentView}]),onClick:c[2]||(c[2]=e=>t.$emit("view-change","timeGridWeek"))}," Week ",2),Object(n["i"])("button",{class:Object(n["r"])(["toggle-btn",{active:"timeGridDay"===e.currentView}]),onClick:c[3]||(c[3]=e=>t.$emit("view-change","timeGridDay"))}," Day ",2)]),Object(n["i"])("button",{class:"nav-btn",onClick:c[4]||(c[4]=e=>t.$emit("next"))},c[7]||(c[7]=[Object(n["i"])("i",{class:"fas fa-chevron-right"},null,-1)]))])])])}}};o("4935");const J=v()(N,[["__scopeId","data-v-6d93614d"]]);var F=J,H=o("3659"),Y=o("3cdb"),K=o("f46e"),R=o("4505");o("d9e2"),o("13d5"),o("ab43"),o("9485"),o("1e70"),o("79a4"),o("c1a1"),o("8b00"),o("a4e7"),o("1e5a"),o("72c3");async function Q(){try{const e=await fetch("https://raw.githubusercontent.com/suyogshiftcare/jsontest/main/available.json");if(!e.ok)throw new Error("Failed to fetch doctors");const t=await e.json();return oe(t)}catch(e){return console.error("Error fetching doctors:",e),[]}}function X(e,t){const o=[];let n=Z(e);const c=Z(t);while(n<c)o.push(ee(n)),n=new Date(n.getTime()+18e5);return o}function Z(e){if(!e||"string"!==typeof e)throw new Error("Invalid time string: "+e);const t=e.trim().match(/(\d+):(\d+)(AM|PM)/);if(!t)throw new Error("Invalid time format: "+e);const[o,n]=e.trim().match(/(\d+):(\d+)(AM|PM)/).slice(1);let c=parseInt(o,10);const a=parseInt(n,10),i=e.includes("PM");i&&12!==c&&(c+=12),i||12!==c||(c=0);const r=new Date;return r.setHours(c,a,0,0),r}function ee(e){let t=e.getHours();const o=e.getMinutes().toString().padStart(2,"0"),n=t>=12?"PM":"AM";return t=t%12||12,`${t}:${o} ${n}`}function te(e){return e.sort((e,t)=>{const o=new Date("2000-01-01 "+e),n=new Date("2000-01-01 "+t);return o-n})}function oe(e){const t=e.reduce((e,t)=>{const{name:o,timezone:n,day_of_week:c,available_at:a,available_until:i}=t;return e[o]||(e[o]={name:o,timezone:n,availability:{}}),e[o].availability[c]||(e[o].availability[c]=[]),a&&i&&e[o].availability[c].push(...X(a,i)),e},{}),o=["General Practitioner","Cardiologist","Dermatologist","Pediatrician","Neurologist","Orthopedic Surgeon"];return Object.values(t).map((e,t)=>({id:t+1,name:e.name,speciality:o[t%o.length],timezone:e.timezone,availability:Object.entries(e.availability).map(([e,t])=>({day:e,hours:te([...new Set(t)])}))}))}var ne=Object(i["a"])({state:{doctors:[],bookings:JSON.parse(localStorage.getItem("bookings")||"[]"),user:JSON.parse(localStorage.getItem("user")||"{}")},mutations:{setDoctors(e,t){e.doctors=t},addBooking(e,t){e.bookings.push(t),localStorage.setItem("bookings",JSON.stringify(e.bookings))},removeBooking(e,t){e.bookings=e.bookings.filter(e=>e.id!==t),localStorage.setItem("bookings",JSON.stringify(e.bookings))},setBookings(e,t){e.bookings=t,localStorage.setItem("bookings",JSON.stringify(e.bookings))},setUser(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))}},actions:{async loadDoctors({commit:e}){const t=await Q();e("setDoctors",t)},bookSlot({commit:e,state:t},{doctorId:o,date:n,day:c,time:a,notify:i}){const r=t.bookings.find(e=>e.userId===t.user.id&&e.date===n&&e.time===a);if(r)throw new Error("You already have an appointment at this time");const s={id:Date.now(),userId:t.user.id,doctorId:o,date:n,day:c,time:a,notify:i,bookedAt:(new Date).toISOString()};e("addBooking",s)},cancelBooking({commit:e,state:t},o){const n=t.bookings.find(e=>e.id===o);if(!n)throw new Error("Booking not found");if(n.userId!==t.user.id)throw new Error("You can only cancel your own bookings");e("removeBooking",o)},saveUser({commit:e},t){e("setUser",t)},logout({commit:e}){e("setUser",{}),localStorage.removeItem("user")}},getters:{getDoctorById:e=>t=>e.doctors.find(e=>e.id===t),bookedSlots:e=>e.bookings,user:e=>e.user}});o("7d54");function ce(e){const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${n}`}function ae(e,t,{doctor:o,bookedSlots:n,currentUserId:c,currentDate:a,getDoctorById:i}){if(!o)return[];const r=[],s=o.availability.reduce((e,t)=>(e[t.day]=t.hours,e),{});let l=new Date(e);while(l<=t){const e=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(l);if(s[e]){const t=s[e];t.forEach(t=>{const[s,d,u]=t.match(/(\d+):(\d+) (AM|PM)/).slice(1);let b=parseInt(s,10);"PM"===u&&12!==b&&(b+=12),"AM"===u&&12===b&&(b=0);const v=new Date(l);v.setHours(b,parseInt(d,10),0,0);const O=v<a;let j=!1;if(!O){const e=(v-a)/6e4;j=e<15}const p=ce(v),f=n.find(n=>n.date===p&&n.day===e&&n.time===t&&n.doctorId===o.id&&n.userId!==c),m=n.find(n=>n.userId===c&&n.date===p&&n.day===e&&n.time===t&&n.doctorId===o.id),g=n.find(n=>n.userId===c&&n.date===p&&n.day===e&&n.time===t&&n.doctorId!==o.id);let h="available",y="Available",w="";if(O)h="past",y="Past";else if(m)h="booked-by-user",y="Your Booking",w="Click to cancel";else if(f)h="booked",y="Booked",w="This slot is booked by another patient";else if(g){h="schedule-conflict",y="Schedule Conflict";const e=i(g.doctorId);w=`You have an appointment with Dr. ${e.name} at this time. To book this slot, please cancel your appointment with Dr. ${e.name} first.`}else j&&(h="too-late-to-book",y="Too Late to Book",w="This slot is within 15 minutes of the current time and can no longer be booked.");r.push({title:y,start:v,end:new Date(v.getTime()+18e5),extendedProps:{day:e,time:t,status:h,slotDate:v,bookingId:(null===m||void 0===m?void 0:m.id)||(null===f||void 0===f?void 0:f.id),tooltip:w},classNames:[h+"-slot"]})})}l.setDate(l.getDate()+1)}return r}const ie={class:"calendar-view"};var re={__name:"DoctorCalendar",props:{doctor:{type:Object,required:!0},bookedSlots:{type:Array,required:!0},initialView:{type:String,default:"timeGridWeek"},options:{type:Object,default:()=>({})}},emits:["slotSelected","bookingSelected"],setup(e,{expose:t,emit:o}){const c=e,a=o,i=Object(n["z"])(null);function r(e){const{day:t,time:o,status:n,slotDate:c,bookingId:i}=e.event.extendedProps;"available"===n?a("slotSelected",{day:t,time:o,slotDate:c}):"booked-by-user"===n&&i&&a("bookingSelected",{bookingId:i,day:t,time:o,slotDate:c})}const s=Object(n["d"])(()=>{const e=new Date,t=e.toISOString().split("T")[0],o=new Date(e);o.setMonth(e.getMonth()+1);const n=o.toISOString().split("T")[0];return{plugins:[Y["a"],K["a"],R["a"]],initialView:c.initialView,initialDate:t,headerToolbar:{left:"",center:"title",right:""},titleFormat:{month:"short",day:"numeric",year:"numeric",separator:" - "},events:(e,t)=>{const o=ae(e.start,e.end,{doctor:c.doctor,bookedSlots:c.bookedSlots,currentUserId:ne.getters.user.id,currentDate:new Date,getDoctorById:ne.getters.getDoctorById});t(o)},eventClick:r,slotMinTime:"07:00:00",slotMaxTime:"18:00:00",slotDuration:"00:30:00",allDaySlot:!1,height:"auto",validRange:{start:t,end:n},nowIndicator:!0,eventDidMount:e=>{e.event.extendedProps.tooltip&&e.el.setAttribute("data-tooltip",e.event.extendedProps.tooltip)},eventContent:e=>({html:`\n          <div class="slot-content">\n            <div class="slot-time">${e.event.extendedProps.time}</div>\n            <div class="slot-status">${e.event.title}</div>\n          </div>\n        `}),...c.options}});function l(){var e;return null===(e=i.value)||void 0===e?void 0:e.getApi()}return t({getApi:l,generateCalendarEvents:ae}),Object(n["J"])(()=>c.bookedSlots,()=>{if(i.value){const e=i.value.getApi();e.refetchEvents()}},{deep:!0}),Object(n["J"])(()=>c.initialView,e=>{if(i.value){const t=i.value.getApi();t.changeView(e)}}),(e,t)=>(Object(n["w"])(),Object(n["h"])("div",ie,[Object(n["k"])(Object(n["F"])(H["a"]),{options:s.value,ref_key:"calendar",ref:i},null,8,["options"])]))}};o("6cf7");const se=v()(re,[["__scopeId","data-v-2c98505c"]]);var le=se;const de={class:"modal-overlay"},ue={class:"modal"},be={class:"modal-actions"};var ve={__name:"BookingModal",props:{show:{type:Boolean,required:!0},doctor:{type:Object,required:!0},day:{type:String,required:!0},time:{type:String,required:!0}},emits:["close","confirm"],setup(e,{emit:t}){const o=t,c=Object(n["z"])(!1),a=()=>{o("confirm",{notify:c.value})};return(t,o)=>{var i;return Object(n["L"])((Object(n["w"])(),Object(n["h"])("div",de,[Object(n["i"])("div",ue,[o[3]||(o[3]=Object(n["i"])("h2",null,"Confirm Your Appointment",-1)),Object(n["i"])("p",null,"Doctor: "+Object(n["E"])(null===(i=e.doctor)||void 0===i?void 0:i.name),1),Object(n["i"])("p",null,"Day: "+Object(n["E"])(e.day),1),Object(n["i"])("p",null,"Time: "+Object(n["E"])(e.time),1),Object(n["i"])("label",null,[Object(n["L"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e)},null,512),[[n["G"],c.value]]),o[2]||(o[2]=Object(n["j"])(" Notify me 30 minutes before the appointment "))]),Object(n["i"])("div",be,[Object(n["i"])("button",{onClick:a,class:"confirm-btn"},"Confirm"),Object(n["i"])("button",{onClick:o[1]||(o[1]=e=>t.$emit("close")),class:"cancel-btn"},"Cancel")])])],512)),[[n["I"],e.show&&e.doctor]])}}};o("ff00");const Oe=v()(ve,[["__scopeId","data-v-a83e24f0"]]);var je=Oe;const pe={class:"modal-overlay"},fe={class:"modal"},me={class:"modal-actions"};var ge={__name:"BookedSlotModal",props:{show:{type:Boolean,required:!0},doctor:{type:Object,required:!0},day:{type:String,required:!0},time:{type:String,required:!0},bookingId:{type:Number,required:!0}},emits:["close","cancelled"],setup(e,{emit:t}){const o=Object(i["b"])(),c=e,a=t,r=()=>{o.dispatch("cancelBooking",c.bookingId),a("cancelled"),a("close")};return(t,o)=>{var c;return Object(n["L"])((Object(n["w"])(),Object(n["h"])("div",pe,[Object(n["i"])("div",fe,[o[1]||(o[1]=Object(n["i"])("h2",null,"Cancel Appointment",-1)),Object(n["i"])("p",null,"Doctor: "+Object(n["E"])(null===(c=e.doctor)||void 0===c?void 0:c.name),1),Object(n["i"])("p",null,"Day: "+Object(n["E"])(e.day),1),Object(n["i"])("p",null,"Time: "+Object(n["E"])(e.time),1),Object(n["i"])("div",me,[Object(n["i"])("button",{onClick:r,class:"cancel-btn"}," Cancel Appointment "),Object(n["i"])("button",{onClick:o[0]||(o[0]=e=>t.$emit("close")),class:"close-btn"},"Close")])])],512)),[[n["I"],e.show]])}}};o("e28d");const he=v()(ge,[["__scopeId","data-v-bfb0b2b4"]]);var ye=he;const we={class:"schedule-container"},ke={class:"content"},De={key:0,class:"loading"},Se={key:1},Ie={key:2,class:"error"},_e={class:"toast-container"};var Ce={__name:"DoctorSchedule",setup(e){const t=Object(i["b"])(),o=Object(r["c"])(),c=Object(r["d"])(),a=Object(n["z"])(null),s=Object(n["z"])(null),l=Object(n["z"])(!0),d=Object(n["z"])(!1),u=Object(n["z"])(!1),b=Object(n["z"])(""),v=Object(n["z"])(""),O=Object(n["z"])(null),j=Object(n["z"])(null),p=Object(n["z"])(window.innerWidth<=768?"timeGridDay":"timeGridWeek"),f=Object(n["z"])(new Date),m=Object(n["z"])(new Date),g=Object(n["z"])([]);function h(){const e=window.innerWidth<=768?"timeGridDay":"timeGridWeek";if(p.value!==e&&(p.value=e,a.value)){const t=a.value.getApi();t.changeView(e),C(t.view)}}function y({day:e,time:t,slotDate:o}){s.value&&(b.value=e,v.value=t,O.value=o,d.value=!0)}function w({bookingId:e,day:o,time:n,slotDate:c}){s.value&&(b.value=o,v.value=n,O.value=c,j.value=t.getters.bookedSlots.find(t=>t.id===e),u.value=!0)}async function k({notify:e}){if(!s.value||!O.value)return;const o=O.value.toISOString().split("T")[0];try{await t.dispatch("bookSlot",{doctorId:s.value.id,date:o,day:b.value,time:v.value,notify:e}),d.value=!1,z("success","Appointment booked successfully"+(e?". We'll notify you 30 minutes before.":"."))}catch(n){z("error",n.message||"Failed to book appointment. Please try again.")}}function D(){z("success","Appointment cancelled successfully")}function S(e){if(p.value=e,a.value){const t=a.value.getApi();t.changeView(e),C(t.view)}}function I(){if(a.value){const e=a.value.getApi();e.prev(),C(e.view)}}function _(){if(a.value){const e=a.value.getApi();e.next(),C(e.view)}}function C(e){f.value=e.activeStart,m.value=e.activeEnd}function E(e){C(e.view)}Object(n["u"])(()=>{t.state.doctors.length||t.dispatch("loadDoctors");const e=Number(o.params.id);s.value=t.getters.getDoctorById(e),s.value||c.push("/doctors"),l.value=!1,window.addEventListener("resize",h)}),Object(n["v"])(()=>{window.removeEventListener("resize",h)});const A=Object(n["d"])(()=>({datesSet:E}));function z(e,t){const o=Date.now();g.value.push({id:o,type:e,message:t}),setTimeout(()=>{g.value=g.value.filter(e=>e.id!==o)},5e3)}function B(e){return{success:"fa-check-circle",error:"fa-exclamation-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"}[e]}return(e,o)=>(Object(n["w"])(),Object(n["h"])("div",we,[Object(n["k"])(F,{doctor:s.value,"current-view":p.value,"start-date":f.value,"end-date":m.value,onPrev:I,onNext:_,onViewChange:S,onBook:o[0]||(o[0]=e=>d.value=!0),onBack:o[1]||(o[1]=e=>Object(n["F"])(c).push("/doctors"))},null,8,["doctor","current-view","start-date","end-date"]),Object(n["i"])("div",ke,[l.value?(Object(n["w"])(),Object(n["h"])("div",De,o[4]||(o[4]=[Object(n["i"])("div",{class:"spinner"},null,-1),Object(n["i"])("p",null,"Loading schedule...",-1)]))):s.value?(Object(n["w"])(),Object(n["h"])("div",Se,[Object(n["k"])(le,{ref_key:"calendar",ref:a,doctor:s.value,"booked-slots":Object(n["F"])(t).getters.bookedSlots,"initial-view":p.value,options:A.value,onSlotSelected:y,onBookingSelected:w},null,8,["doctor","booked-slots","initial-view","options"])])):(Object(n["w"])(),Object(n["h"])("p",Ie,"Doctor not found"))]),s.value?(Object(n["w"])(),Object(n["f"])(je,{key:0,show:d.value,doctor:s.value,day:b.value,time:v.value,onClose:o[2]||(o[2]=e=>d.value=!1),onConfirm:k},null,8,["show","doctor","day","time"])):Object(n["g"])("",!0),s.value&&j.value?(Object(n["w"])(),Object(n["f"])(ye,{key:1,show:u.value,doctor:s.value,day:b.value,time:v.value,"booking-id":j.value.id,onClose:o[3]||(o[3]=e=>u.value=!1),onCancelled:D},null,8,["show","doctor","day","time","booking-id"])):Object(n["g"])("",!0),Object(n["i"])("div",_e,[Object(n["k"])(n["c"],{name:"toast"},{default:Object(n["K"])(()=>[(Object(n["w"])(!0),Object(n["h"])(n["a"],null,Object(n["A"])(g.value,e=>(Object(n["w"])(),Object(n["h"])("div",{key:e.id,class:Object(n["r"])(["toast",e.type])},[Object(n["i"])("i",{class:Object(n["r"])(["fas",B(e.type)])},null,2),Object(n["i"])("span",null,Object(n["E"])(e.message),1)],2))),128))]),_:1})])]))}};o("1ebf");const Ee=v()(Ce,[["__scopeId","data-v-30a18a67"]]);var Ae=Ee;const ze=[{path:"/",component:w},{path:"/doctors",component:B,meta:{requiresAuth:!0}},{path:"/doctor/:id",component:Ae,meta:{requiresAuth:!0}}],Be=Object(r["a"])({history:Object(r["b"])(),routes:ze});Be.beforeEach((e,t,o)=>{var n;const c=!(null===(n=ne.state.user)||void 0===n||!n.id);e.matched.some(e=>e.meta.requiresAuth)&&!c?o("/"):o()});var Me=Be;const Pe=Object(n["e"])(j);Pe.use(Me),Pe.use(ne),Pe.mount("#app")},"6cf7":function(e,t,o){"use strict";o("8da4")},7941:function(e,t,o){},"83f8":function(e,t,o){"use strict";o("f2a1")},"841e":function(e,t,o){},"8da4":function(e,t,o){},b0b6:function(e,t,o){},c497:function(e,t,o){},c58e:function(e,t,o){},c98d:function(e,t,o){},cb53:function(e,t,o){"use strict";o("841e")},cf05:function(e,t,o){e.exports=o.p+"img/logo.8b1c031b.png"},e28d:function(e,t,o){"use strict";o("5163")},ec67:function(e,t,o){"use strict";o("b0b6")},f2a1:function(e,t,o){},ff00:function(e,t,o){"use strict";o("c98d")}});
//# sourceMappingURL=app.31c6f497.js.map